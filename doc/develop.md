# 开发记录

## 本项目的目的
为[nuxtkoablog](https://github.com/carlleton/nuxtkoablog)这个项目做一个客户端
暂时只是做一个单人的，先满足个人需要

## 数据库
客户端来说，关系数据库的话采用sqlite3
nosql使用nedb，因为扒了下leanote的客户端，发现他用的也是这个数据库。网络上说这个库最大256M，先记录一下，稍后对比其他的。
对于笔记来说，很轻易的就能达到几百兆，但上边俩都是单文件，数据量大时扩展来说不容易。
网络上有推荐用leveldb。
暂时使用linvodb3和level-js来实现看看

## 功能开发进度
- [x] 登陆
- [x] 数据库增删查改抽象化
	- [ ] options表
	- [x] usn表
	- [x] notes表
	- [x] catenotes表
- [x] 本地接口
	- [x] 同步功能，同步第一步
	- [ ] 笔记分类增删改
	- [ ] 笔记增删改
- [x] 编辑器页面
	- [ ] 笔记分类增删改
	- [ ] 笔记增删改
	- [ ] 编辑器
	- [ ] 笔记-显示模式、编辑模式
	- [ ] 笔记页面右键，增加删除优化
- [x] 同步处理
	
## usn逻辑分析
1. 增加个自动deal，1或者0，判断是否已经处理过了
2. 新增状态是1，更改状态是2，删除状态是0
3. 同步的时候客户端先获取比当前usn大的，
	服务端这时候判断是否有deal是0的，如果有，把所有是0的都处理成1，maxusn增加1
4. 客户端再上传deal是0的，表示没有处理过的
